<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='dashboard.css') }}">
    <script>
        function toggleTaskForm() {
            const taskForm = document.getElementById("task-form");
            taskForm.style.display = taskForm.style.display === "block" ? "none" : "block";
        }
        function showTaskDetails(title, description, assigned_user_id) {
            alert("Title: " + title + "\nDescription: " + description + "\nAssigned to: " + assigned_user_id);
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Dashboard</h1>
        <a href="/logout">Logout</a>
        <hr>

        {% if current_user.is_admin %}
            <button onclick="toggleTaskForm()">Create Task</button>
            <div id="task-form" style="display:none;" class="task-form">
                <h2>Create Task</h2>
                <form action="/tasks" method="post">
                    <label for="title">Title:</label>
                    <input type="text" id="title" name="title"><br>

                    <label for="description">Description:</label>
                    <textarea id="description" name="description"></textarea><br>

                    <label for="assigned_user_id">Assign to User ID:</label>
                    <select id="assigned_user_id" name="assigned_user_id">
                        {% for user in all_users %}
                            <option value="{{ user.user_id }}">{{ user.user_id }}</option>
                        {% endfor %}
                    </select>
                    <br>

                    <input type="submit" value="Create Task">
                </form>
            </div>
        {% endif %}

        <hr>
        <div class="task-list">
            <h2>Your Tasks</h2>
            {% for task in tasks %}
            <!-- Tasks will be populated here -->
            <button onclick='showTaskDetails("{{ task.title }}", "{{ task.description }}", "{{ task.assigned_user_id }}")'>{{ task.title }}</button>
            {% endfor %}
        </div>
    </div>
</body>
</html>
